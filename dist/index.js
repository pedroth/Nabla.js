var Nabla=function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){var a=r(1);function n(t,e){var r=[];return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function i(t){var e=[];return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function o(t,e){var r=[];return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function s(t,e){return t[0]*e[0]+t[1]*e[1]}function h(t){return s(t,t)}function c(t){return Math.sqrt(s(t,t))}function u(t,e){var r=[];return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function l(t,e){var r=[];return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function f(t,e,r){var a=r[1]/t[1];return[a,(-t[0]*a+r[0])/e]}function p(t,e,r){var a=r[0]/t[0];return[a,(-t[1]*a+r[1])/e]}var g=function(t){this.canvas=t,this.ctx=t.getContext("2d"),this.image=this.ctx.getImageData(0,0,t.width,t.height),this.imageData=this.image.data};g.prototype.getSize=function(){return[this.canvas.height,this.canvas.width]},g.prototype.paintImage=function(){this.ctx.putImageData(this.image,0,0)},g.prototype.getCanvas=function(){return this.canvas},g.prototype.clearImage=function(t){this.useCanvasCtx(e=>{var r=e.getSize();e.ctx.fillStyle="rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")",e.ctx.globalCompositeOperation="source-over",e.ctx.fillRect(0,0,r[1],r[0])},!0)},g.prototype.useCanvasCtx=function(t,e=!1){e||this.ctx.putImageData(this.image,0,0),t(this),this.image=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.imageData=this.image.data},g.prototype.getImageIndex=function(t){return 4*(this.canvas.width*t[0]+t[1])},g.prototype.getPxl=function(t){var e=this.getImageIndex(t);return[this.imageData[e],this.imageData[e+1],this.imageData[e+2],this.imageData[e+3]]},g.prototype.drawPxl=function(t,e){var r=this.getImageIndex(t);this.imageData[r]=e[0],this.imageData[r+1]=e[1],this.imageData[r+2]=e[2],this.imageData[r+3]=e[3]},g.prototype.drawLine=function(t,e,r){r.points=[t,e];var a=[];a.push(t),a.push(e);for(var n=[],i=[],h=0;h<a.length;h++){0<=(g=a[h])[0]&&g[0]<this.canvas.height&&0<=g[1]&&g[1]<this.canvas.width?n.push(g):i.push(g)}if(2!=n.length){var c=[],u=[e[0]-t[0],e[1]-t[1]];c.push(f(u,-(this.canvas.height-1),[-t[0],-t[1]])),c.push(p(u,-(this.canvas.width-1),[this.canvas.height-1-t[0],-t[1]])),c.push(f(u,this.canvas.height-1,[this.canvas.height-1-t[0],this.canvas.width-1-t[1]])),c.push(p(u,this.canvas.width-1,[-t[0],this.canvas.width-1-t[1]]));var l=[];for(h=0;h<c.length;h++){var g;0<=(g=c[h])[0]&&g[0]<=1&&0<=g[1]&&g[1]<=1&&l.push(g)}if(0!=l.length)if(n.length>0){var d=[t[0]+l[0][0]*u[0],t[1]+l[0][0]*u[1]];this.drawLineInt(n.pop(),d,r)}else{var m=[t[0]+l[0][0]*u[0],t[1]+l[0][0]*u[1]];for(h=1;h<l.length;h++){if(s(u=o(d=[t[0]+l[h][0]*u[0],t[1]+l[h][0]*u[1]],m),u)>.001)return void this.drawLineInt(m,d,r)}this.drawLineInt(m,m,r)}}else this.drawLineInt(n[0],n[1],r)},g.prototype.drawLineInt=function(t,e,r){t=i(t),e=i(e);var a=[-1,0,1],h=a.length,c=h*h,u=[];u[0]=t[0],u[1]=t[1];var l=o(e,t),f=[];for(f[0]=-l[1],f[1]=l[0],r(u,r.points,this);u[0]!==e[0]||u[1]!==e[1];){for(var p=Number.MAX_VALUE,g=[],d=0;d<c;d++){var m=a[d%h],y=a[Math.floor(d/h)],v=o(n(u,[m,y]),t),w=Math.abs(s(v,f))-s(v,l);p>w&&(p=w,g=[m,y])}r(u=n(u,g),r.points,this)}r(u,r.points,this)},g.prototype.drawPolygon=function(t,e,r=g.isInsidePolygon){let a=[[Number.MAX_VALUE,Number.MAX_VALUE],[Number.MIN_VALUE,Number.MIN_VALUE]];for(let e=0;e<t.length;e++)a[0]=u(t[e],a[0]),a[1]=l(t[e],a[1]);let n=o(this.getSize(),[1,1]),s=[0,0];a[0]=i(u(n,l(s,a[0]))),a[1]=i(u(n,l(s,a[1])));for(var h=a[0][0];h<a[1][0];h++)for(var c=a[0][1];c<a[1][1];c++){var f=[h,c];r(f,t)&&e(f,t,this)}},g.prototype.drawTriangle=function(t,e,r,a){var n=[t,e,r];this.drawPolygon(n,a,g.isInsideConvex)},g.prototype.drawQuad=function(t,e,r,a,n){this.drawPolygon([t,e,r,a],n)},g.prototype.drawImage=function(t,e){"isReady"in t&&!t.isReady||this.useCanvasCtx(r=>r.ctx.drawImage(t,e[1],e[0]))},g.prototype.drawCircle=function(t,e,r){var a=function(t,e){var r=[];return r[0]=t[0]*e,r[1]=t[1]*e,r}([1,1],e),s=[o(t,a),n(t,a)],h=this.getSize();s[0]=i(u(o(h,[1,1]),l([0,0],s[0]))),s[1]=i(u(o(h,[1,1]),l([0,0],s[1])));for(var c=s[0][0];c<=s[1][0];c++)for(var f=s[0][1];f<=s[1][1];f++){var p=[c,f];this.isInsideCircle(p,t,e)&&r(p,[t,e],this)}},g.prototype.isInsideCircle=function(t,e,r){return h(o(t,e))<=r*r},g.prototype.addEventListener=function(t,e,r){this.canvas.addEventListener(t,e,r)},g.prototype.drawString=function(t,e,r){this.useCanvasCtx(a=>{r(a.ctx),a.ctx.fillText(e,t[1],t[0])})},g.isInsidePolygon=function(t,e){for(var r=[],a=0,n=e.length,i=0;i<n;i++)r[0]=o(e[(i+1)%n],t),r[1]=o(e[i],t),a+=Math.acos(s(r[0],r[1])/(c(r[0])*c(r[1])));return Math.abs(a-2*Math.PI)<.001},g.isInsideConvex=function(t,e){for(var r=e.length,a=[],n=[],i=0;i<r;i++){a[i]=o(e[(i+1)%r],e[i]);let h=[-a[i][1],a[i][0]],c=o(t,e[i]);n[i]=s(c,h)}let h=a[0][0]*a[1][1]-a[0][1]*a[1][0]>0?1:-1;for(i=0;i<r;i++){if(n[i]*h<0)return!1}return!0},g.simpleShader=function(t){return(e,r,a)=>a.drawPxl(e,t)},g.colorShader=function(t){return g.interpolateTriangleShader((e,r,a,n)=>{for(var i=[0,0,0,0],o=0;o<r.length;o++)i[0]=i[0]+t[o][0]*n[o],i[1]=i[1]+t[o][1]*n[o],i[2]=i[2]+t[o][2]*n[o],i[3]=i[3]+t[o][3]*n[o];a.drawPxl(e,i)})},g.interpolateQuadShader=function(t){return function(e,r,a){var n=[r[0],r[1],r[2]],i=[r[2],r[3],r[0]],o=g.triangleBaryCoord(e,n);o[0]>0&&o[1]>0&&o[2]>0&&Math.abs(o[0]+o[1]+o[2]-1)<1e-10?t(e,r,a,[o[0],o[1],o[2],0]):(o=g.triangleBaryCoord(e,i),t(e,r,a,[o[2],0,o[0],o[1]]))}},g.interpolateTriangleShader=function(t){return(e,r,a)=>{alpha=g.triangleBaryCoord(e,r),t(e,r,a,alpha)}},g.interpolateLineShader=function(t){return(e,r,a)=>{var n=o(r[1],r[0]),i=o(e,r[0]),c=h(n),u=s(i,n);t(e,r,a,0==c?0:u/c)}},g.quadTextureShader=function(t,e,r=g.bilinearInterpolation){let s=null;return g.interpolateQuadShader((h,c,f,p)=>{t.isReady&&null!=s||(s=new g(a.getImageCanvas(t)));const d=s,m=d.getSize(),y=[0,0];for(let t=0;t<e.length;t++)y[0]=y[0]+e[t][0]*p[t],y[1]=y[1]+e[t][1]*p[t];var v=[(1-y[1])*(m[1]-1),(m[0]-1)*y[0]],w=i(v=l([0,0],u(o([m[0],m[1]],[1,1]),v))),x=[d.getPxl(w),d.getPxl(n(w,[1,0])),d.getPxl(n(w,[1,1])),d.getPxl(n(w,[0,1]))],S=r(x,o(v,w));f.drawPxl(h,S)})},g.triangleCache=(()=>{const t=[];return{constains:e=>null!=t[e%3],get:e=>t[e%3],set:(e,r)=>t[e%3]=r}})(),g.triangleHash=t=>{return[t[0][0],t[1][0],t[2][0],t[0][1],t[1][1],t[2][1]].reduce((t,e)=>31*t+e,1)},g.triangleBaryCoord=function(t,e){const r=g.triangleHash(e),a=[t[0]-e[0][0],t[1]-e[0][1]];if(!g.triangleCache.constains(r)){const t=[e[1][0]-e[0][0],e[1][1]-e[0][1]],a=[e[2][0]-e[0][0],e[2][1]-e[0][1]],n=t[0]*a[1]-t[1]*a[0];g.triangleCache.set(r,{triangle:e,u:t.map(t=>t/n),v:a.map(t=>t/n),det:n,hash:r})}const n=g.triangleCache.get(r),i=n.u,o=n.v;if(0==n.det)return[0,0,0];var s=[o[1]*a[0]-o[0]*a[1],i[0]*a[1]-i[1]*a[0]];return[1-s[0]-s[1],s[0],s[1]]},g.bilinearInterpolation=function(t,e){for(var r=[],a=0;a<t.length;a++){var n=t[0][a]+(t[3][a]-t[0][a])*e[1],i=n+(t[1][a]+(t[2][a]-t[1][a])*e[1]-n)*e[0];r.push(i)}return r},g.createCanvas=function(t,e){},t.exports=g},function(t,e){var r={getImageCanvas:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var r=e.getContext("2d");return r.fillStyle="rgba(0, 0, 0, 0)",r.globalCompositeOperation="source-over",r.fillRect(0,0,e.width,e.height),r.drawImage(t,0,0),e},getDataFromImage:function(t){return canvas=r.getImageCanvas(t),canvas.getContext("2d").getImageData(0,0,t.width,t.height)},loadImage:function(t){var e=new Image;return e.src=t,e.isReady=!1,e.onload=()=>e.isReady=!0,e},generateImageReadyPredicate:function(t){return()=>t.isReady}};t.exports=r},function(t,e,r){let a=r(0),n=r(3),i=r(1),o=r(4),s={};s.Canvas=a,s.Canvas2D=n,s.ImageIO=i,s.Stream=o,t.exports.default=s},function(t,e,r){var a=r(0),n=function(t,e){if(a.call(this,t),2!=e.length||2!=e[0].length&&2!=e[1].length)throw"camera space must be 2-dim array with 2-dim arrays representing an interval";this.cameraSpace=e};(n.prototype=Object.create(a.prototype)).constructor=n,n.prototype.integerTransform=function(t){return[-(this.canvas.height-1)/(this.cameraSpace[1][1]-this.cameraSpace[1][0])*(t[1]-this.cameraSpace[1][1]),(this.canvas.width-1)/(this.cameraSpace[0][1]-this.cameraSpace[0][0])*(t[0]-this.cameraSpace[0][0])]},n.prototype.inverseTransform=function(t){return[this.cameraSpace[0][0]+(this.cameraSpace[0][1]-this.cameraSpace[0][0])/(this.canvas.width-1)*t[1],this.cameraSpace[1][1]-(this.cameraSpace[1][1]-this.cameraSpace[1][0])/(this.canvas.height-1)*t[0]]},n.prototype.drawLine=function(t,e,r){y1=this.integerTransform(t),y2=this.integerTransform(e),a.prototype.drawLine.call(this,y1,y2,r)},n.prototype.drawTriangle=function(t,e,r,n){y1=this.integerTransform(t),y2=this.integerTransform(e),y3=this.integerTransform(r),a.prototype.drawTriangle.call(this,y1,y2,y3,n)},n.prototype.drawQuad=function(t,e,r,n,i){y1=this.integerTransform(t),y2=this.integerTransform(e),y3=this.integerTransform(r),y4=this.integerTransform(n),a.prototype.drawQuad.call(this,y1,y2,y3,y4,i)},n.prototype.drawCircle=function(t,e,r){y=this.integerTransform(t),z=this.integerTransform([e,0])[1]-this.integerTransform([0,0])[1],a.prototype.drawCircle.call(this,y,z,r)},n.prototype.drawImage=function(t,e){a.prototype.drawImage.call(this,t,this.integerTransform(e))},n.prototype.drawString=function(t,e,r){y=this.integerTransform(t),a.prototype.drawString.call(this,y,e,r)},n.prototype.setCamera=function(t){if(2!=t.length||2!=t[0].length&&2!=t[1].length)throw"camera space must be 2-dim array with 2-dim arrays representing an interval";this.cameraSpace=t},t.exports=n},function(t,e,r){var a=r(5),n=function(t,e=(t=>t),r=(t=>!0)){this.gen=t,this.mapFunction=e,this.filterPredicate=r};n.prototype.state=function(){return this.gen.state},n.prototype.hasNext=function(){return this.gen.hasNext(this.filteredState())},n.prototype.filteredState=function(){for(var t=this.state();this.gen.hasNext(t)&&!this.filterPredicate(this.gen.peek(t));)t=this.gen.next(t);return t},n.prototype.head=function(){let t=this.filteredState();if(this.gen.hasNext(t))return this.gen.peek(t);throw"No head element exception"},n.prototype.tail=function(){return new n(n.generatorOf(this.gen.next(this.filteredState()),this.gen.next,this.gen.peek,this.gen.hasNext),this.mapFunction,this.filterPredicate)},n.prototype.map=function(t){return new n(this.gen,a.of(t).compose(this.mapFunction).get(),this.filterPredicate)},n.prototype.reduce=function(t,e){for(var r=this;r.hasNext();){let a=r.head();t=e(t,r.mapFunction(a)),r=r.tail()}return t},n.prototype.forEach=function(t){for(var e=this;e.hasNext();){let r=e.head();t(e.mapFunction(r)),e=e.tail()}},n.prototype.collect=function(t){return this.reduce(t.identity,t.reduce)},n.prototype.filter=function(t){return new n(this.gen,this.mapFunction,e=>this.filterPredicate(e)&&t(e))},n.prototype.take=function(t){return new n(n.generatorOf({i:0,stream:this},t=>({i:t.i+1,stream:t.stream.tail()}),t=>t.stream.head(),e=>e.stream.hasNext()&&e.i<t),this.mapFunction,this.filterPredicate).collect(n.Collectors.toArray())},n.prototype.takeWhile=function(t){return new n(n.generatorOf(this,t=>t.tail(),t=>t.head(),e=>e.hasNext()&&t(e.head())),this.mapFunction,this.filterPredicate).collect(n.Collectors.toArray())},n.prototype.zip=function(t){return new n(n.generatorOf([this,t],t=>[t[0].tail(),t[1].tail()],t=>[t[0].head(),t[1].head()],t=>t[0].hasNext()&&t[1].hasNext()))},n.prototype.flatMap=function(t){return new n(n.generatorOf({baseStream:this,flatStream:null},e=>{if(!e.flatStream||!e.flatStream.hasNext()){let r=e.baseStream;return{baseStream:r.tail(),flatStream:t(r.head()).tail()}}return{baseStream:e.baseStream,flatStream:e.flatStream.tail()}},e=>e.flatStream&&e.flatStream.hasNext()?e.flatStream.head():t(e.baseStream.head()).head(),e=>e.flatStream?e.baseStream.hasNext()||e.flatStream.hasNext():e.baseStream.hasNext()&&t(e.baseStream.head()).hasNext()))},n.ofHeadTail=function(t,e){return new n(n.generatorOf({h:t,supplier:e},t=>{let e=t.supplier();return e.hasNext()?{h:e.head(),supplier:()=>e.tail()}:{h:null,supplier:null}},t=>t.h,t=>null!=t.h))},n.of=function(t){var e=[{name:"Array",predicate:t=>t.constructor===Array},{name:"Generator",predicate:t=>"function"==typeof t.hasNext&&"function"==typeof t.next&&"function"==typeof t.peek},{name:"Stream",predicate:t=>t.__proto__==n.prototype}],r={Array:t=>new n(n.generatorOf({i:0,array:t},t=>({i:t.i+1,array:t.array}),t=>t.array[t.i],t=>t.i<t.array.length)),Generator:t=>new n(t),Stream:t=>new n(t.gen,t.mapFunction,t.filterPredicate)};for(let a=0;a<e.length;a++)if(e[a].predicate(t))return r[e[a].name](t);throw`Iterable ${t} does not have a stream`},n.range=function(t,e,r=1){return new n(n.generatorOf(t,t=>t+r,t=>t,t=>null==e||t<e))},n.generatorOf=function(t,e,r,a){return new function(){this.state=t,this.next=e,this.peek=r,this.hasNext=a}},n.Collectors={toArray:()=>new function(){this.identity=[],this.reduce=(t,e)=>(t.push(e),t)}},t.exports=n},function(t,e){const r=function(t){this.f=t};r.prototype.compose=function(t){return new r(e=>this.f(t(e)))},r.prototype.leftCompose=function(t){return new r(e=>t(this.f(e)))},r.prototype.apply=function(t){return this.f(t)},r.prototype.get=function(){return this.f},r.of=function(t){return new r(t)},t.exports=r}]).default;